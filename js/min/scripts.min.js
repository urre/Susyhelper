(function($) {
    "use strict";
    var Huskvarna = {
        elements: {
            viewport: $("html, body"),
            mobilenav: $("#mobilenav"),
            hamburger: $(".menu-link"),
            hamburger_icon: $(".menu-link i"),
            push_container: $(".cc"),
            searchicon: $(".search-trigger"),
            searchform: $("#searchform"),
            searchinput: $("#s"),
            close: $("#close"),
            cancel: $(".icon-cancel")
        },
        init: function() {
            this.misc();
            this.mobilenav();
            this.dosearch();
        },
        dosearch: function() {
            Huskvarna.elements.searchicon.click(function(event) {
                Huskvarna.elements.searchform.toggleClass("active");
                Huskvarna.elements.searchinput.focus();
                event.preventDefault();
            });
            Huskvarna.elements.close.click(function(event) {
                Huskvarna.elements.searchform.removeClass("active");
                vent.preventDefault();
            });
        },
        mobilenav: function() {
            Huskvarna.elements.hamburger.click(function(event) {
                event.preventDefault();
                Huskvarna.elements.mobilenav.toggleClass("active");
                Huskvarna.elements.push_container.toggleClass("active");
            });
            Huskvarna.elements.cancel.click(function(event) {
                event.preventDefault();
                Huskvarna.elements.mobilenav.removeClass("active");
                Huskvarna.elements.push_container.removeClass("active");
            });
            var hidenav = Huskvarna.debounce(function() {
                if ($(window).width() > 500) {
                    Huskvarna.elements.mobilenav.removeClass("active");
                    Huskvarna.elements.push_container.removeClass("active");
                    Huskvarna.elements.hamburger_icon.attr("class", "icon-cancel");
                    Huskvarna.elements.searchform.removeClass("active");
                }
            }, 50);
            window.addEventListener("resize", hidenav);
        },
        initSlider: function() {
            setTimeout(function() {
                $(".fotorama").fotorama({
                    maxheight: "580",
                    transitionduration: "2000"
                });
                $(".main-slider-item-caption").addClass("loaded");
                $(".main-slider button").remove();
            }, 200);
        },
        misc: function() {
            $("#rum-mix").mixItUp({
                animation: {
                    duration: 200,
                    effects: "translateZ(-360px) fade rotateY(20deg)",
                    easing: "ease"
                }
            });
            Huskvarna.elements.viewport.bind("scroll mousedown DOMMouseScroll mousewheel keyup", function(e) {
                if (e.which > 0 || e.type === "mousedown" || e.type === "mousewheel") {
                    Huskvarna.elements.viewport.stop().unbind("scroll mousedown DOMMouseScroll mousewheel keyup");
                }
            });
        },
        debounce: function(a, b, c) {
            var d;
            return function() {
                var e = this, f = arguments;
                clearTimeout(d), d = setTimeout(function() {
                    d = null, c || a.apply(e, f);
                }, b), c && !d && a.apply(e, f);
            };
        }
    };
    $(function() {
        Huskvarna.init();
    });
    $(window).scroll(function() {});
    $(window).resize(function() {});
    $(window).load(function() {
        Huskvarna.initSlider();
    });
})(jQuery);